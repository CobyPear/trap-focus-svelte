function t(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}var n=[],e=!1;t(document,"keydown",function(t){e=t.shiftKey&&"Tab"===t.key}),exports.trapFocus=function(o,u){var r,c;void 0===u&&(u={active:!0});var i=u.wrap,a=void 0===i?o:i,f=u.active,s=[].concat(a.querySelectorAll("*")).filter(function(t){return t.tabIndex>=0}),v=null!=(r=s.at(0))?r:a,l=null!=(c=s.at(-1))?c:a,d=document.activeElement;n.push(a),v.focus();var m=function(t){return void 0===t&&(t=a),n.at(-1).contains(t)},p=t(v,"blur",function(){f&&m()&&e&&l.focus()}),y=t(l,"blur",function(){f&&m()&&!e&&v.focus()}),b=t(document,"focusin",function(t){f&&!m(t.target)&&(e?l:v).focus()});return{update:function(t){f=t.active},destroy:function(){b(),p(),y(),n=n.filter(function(t){return t!==a}),d.focus()}}};
