function n(n,t,u,o){return n.addEventListener(t,u,o),()=>n.removeEventListener(t,u,o)}var t=[],u=!1;n(document,"keydown",function(n){u=n.shiftKey&&"Tab"===n.key}),exports.trapFocus=function(o,r){var i,c;void 0===r&&(r={active:!0});var e=r.wrap,f=void 0===e?o:e,a=r.active,d=[].concat(f.querySelectorAll("*")).filter(function(n){return n.tabIndex>=0}),v=null!=(i=d.at(0))?i:f,l=null!=(c=d.at(-1))?c:f;function m(n){return void 0===n&&(n=f),t.at(-1).wrap.contains(n)}t.push({wrap:f,t:document.activeElement}),v.focus();var s=n(v,"blur",function(){a&&m()&&u&&l.focus()}),b=n(l,"blur",function(){a&&m()&&!u&&v.focus()}),p=n(document,"focusin",function(n){a&&!m(n.target)&&(u?l:v).focus()});return{update:function(n){a=n.active},destroy:function(){p(),s(),b(),t.pop().t.focus()}}};
