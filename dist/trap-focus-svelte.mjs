function t(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}let e=[],n=0;function o(o,c=1){function u(){const t=[...o.querySelectorAll("*")].filter((t=>t.tabIndex>=0));return[t.at(0)??o,t.at(-1)??o]}let r;function f(){e.push(o),r=document.activeElement,u().at(0).focus()}function s(){e=e.filter((t=>t!=o)),r.focus()}c&&f();const i=t=>e.at(-1)?.contains(t),a=t(o,"focusout",(t=>{if(i(o)){const[e,o]=u();t.target==e&&n?o.focus():t.target!=o||n||e.focus()}})),d=t(document,"focusin",(t=>{if(i(o)&&!i(t.target)){const[t,e]=u();(n?e:t).focus()}}));return{update(t){t?f():s()},destroy(){d(),a(),s()}}}t(document,"keydown",(t=>n=t.shiftKey&&"Tab"==t.key));export{o as trapFocus};
