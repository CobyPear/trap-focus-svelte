function t(t,n,e,u){return t.addEventListener(n,e,u),()=>t.removeEventListener(n,e,u)}let n=[],e=!1;function u(u,r={active:!0}){var o,c;let{wrap:l=u,active:a}=r;const i=[...l.querySelectorAll("*")].filter(t=>t.tabIndex>=0),d=null!=(o=i.at(0))?o:l,s=null!=(c=i.at(-1))?c:l;function m(t=l){return n.at(-1).wrap.contains(t)}n.push({wrap:l,t:document.activeElement}),d.focus();const f=t(d,"blur",()=>{a&&m()&&e&&s.focus()}),p=t(s,"blur",()=>{a&&m()&&!e&&d.focus()}),v=t(document,"focusin",t=>{a&&!m(t.target)&&(e?s:d).focus()});return{update(t){a=t.active},destroy(){v(),f(),p(),n.pop().t.focus()}}}t(document,"keydown",t=>{e=t.shiftKey&&"Tab"===t.key});export{u as trapFocus};
