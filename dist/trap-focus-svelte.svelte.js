import{listen as t}from"svelte/internal";let e=[],n=!1;function r(r,o={active:!0}){var u,l;let{wrap:c=r,active:a}=o;const i=[...c.querySelectorAll("*")].filter(t=>t.tabIndex>=0),d=null!=(u=i.at(0))?u:c,m=null!=(l=i.at(-1))?l:c;function s(t=c){return e.at(-1).wrap.contains(t)}e.push({wrap:c,t:document.activeElement}),d.focus();const p=t(d,"blur",()=>{a&&s()&&n&&m.focus()}),v=t(m,"blur",()=>{a&&s()&&!n&&d.focus()}),f=t(document,"focusin",t=>{a&&!s(t.target)&&(n?m:d).focus()});return{update(t){a=t.active},destroy(){f(),p(),v(),e.pop().t.focus()}}}t(document,"keydown",t=>{n=t.shiftKey&&"Tab"===t.key});export{r as trapFocus};
